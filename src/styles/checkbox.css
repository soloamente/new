/* Checkbox Component Styles */
/* Maintains h-3.5 w-3.5 size, ring-checkbox-border, and bg-background */

.checkbox-check {
  --border-radius: 0.22rem;
  --border-width: 3px;
  --outline-offset: 3px;
  --outline-width: 2px;
  --outline-color: #579bfd;
  --initial-scale: 0.5;

  /* bouncy spring animation */
  /* prettier-ignore */
  --fill-spring: linear(0, 0.0011 0.45%, 0.0095 1.36%, 0.0357, 0.0753, 0.1255 5.44%, 0.2472 8.17%, 0.6267 15.88%, 0.7426 18.6%, 0.8258, 0.896 23.13%, 0.963, 1.0123, 1.046 31.3%, 1.0609, 1.0708 34.93%, 1.077, 1.078, 1.075 41.73%, 1.0677 44.45%, 1.0316 53.98%, 1.0168 58.52%, 1.0067, 0.9999 66.68%, 0.9954 71.67%, 0.9939 77.12%, 0.9992 99.8%) 0.664s;

  display: block;
  flex-shrink: 0;
  height: 0.875rem; /* h-3.5 = 0.875rem */
  width: 0.875rem; /* w-3.5 = 0.875rem */
  position: relative;
  border-radius: var(--border-radius);
  container-type: inline-size;
}

.checkbox-check::before {
  content: "";
  position: absolute;
  border-radius: inherit;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: var(--background);
  /* ring-2 ring-checkbox-border - Tailwind's ring-2 creates a 2px box-shadow ring */
  box-shadow: 0 0 0 2px var(--checkbox-border);
  transition: opacity 0.2s ease;
}

.checkbox-fill {
  background: var(--checkbox-fill-background);
  border-radius: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  opacity: 0;
  transition: opacity ease 0.2s;
  width: 100%;
  color: var(--checkbox-checkmark);
}

@media (prefers-reduced-motion: no-preference) {
  .checkbox-fill {
    /* prettier-ignore */
    border-radius: max(0px, (var(--border-radius) - (100cqw * var(--initial-scale) / 2)) / var(--initial-scale));
    scale: var(--initial-scale);
    transition: opacity ease 0.2s, scale var(--fill-spring),
      border-radius var(--fill-spring);
  }

  .checkbox-fill svg {
    height: 0.5rem;
    width: auto;
  }

  .checkbox-fill .checkbox-indeterminate {
    height: 0.5rem;
    width: auto;
  }

  .checkbox-fill svg path {
    /* prettier-ignore */
    transition: stroke-dashoffset linear(0, 0.0089 1.34%, 0.0665 4.01%, 0.4534 14.71%, 0.6529 21.39%, 0.7147 24.06%, 0.7899 28.08%, 0.8297 30.75%, 0.8768, 0.9116 38.77%, 0.9438, 0.9646, 0.9779 54.81%, 0.9879 61.5%, 0.9948 70.86%, 0.9981 81.55%, 0.9996 98.93%) 0.3868s;
    stroke-dashoffset: 1;
  }

  .checkbox-fill .checkbox-indeterminate path {
    /* prettier-ignore */
    transition: stroke-dashoffset linear(0, 0.0089 1.34%, 0.0665 4.01%, 0.4534 14.71%, 0.6529 21.39%, 0.7147 24.06%, 0.7899 28.08%, 0.8297 30.75%, 0.8768, 0.9116 38.77%, 0.9438, 0.9646, 0.9779 54.81%, 0.9879 61.5%, 0.9948 70.86%, 0.9981 81.55%, 0.9996 98.93%) 0.3868s;
    stroke-dashoffset: 1;
  }
}

/* Indeterminate state - show a horizontal line */
.checkbox-input:indeterminate + .checkbox-check::before {
  opacity: 0;
  box-shadow: none;
}

.checkbox-input:indeterminate + .checkbox-check .checkbox-fill {
  opacity: 1;
}

.checkbox-input:indeterminate + .checkbox-check .checkbox-checkmark {
  display: none;
}

.checkbox-input:indeterminate + .checkbox-check .checkbox-indeterminate {
  display: block;
}

.checkbox-checkmark {
  display: block;
}

.checkbox-indeterminate {
  display: none;
}

@media (prefers-reduced-motion: no-preference) {
  .checkbox-input:indeterminate + .checkbox-check .checkbox-fill {
    border-radius: inherit;
    scale: 1.1;
  }

  .checkbox-input:indeterminate + .checkbox-check .checkbox-indeterminate path {
    stroke-dashoffset: 0;
    transition-delay: 33ms;
  }
}

/* Make sure the opacity stays the same between :hover -> :checked (but not :focus-visible -> :checked) */
.checkbox-input:checked:not(:focus-visible) + .checkbox-check::before {
  opacity: 0;
  box-shadow: none;
}

/* Remove ring when checked to prevent checkbox from looking smaller */
.checkbox-input:checked + .checkbox-check::before {
  box-shadow: none;
}

.checkbox-input:checked + .checkbox-check .checkbox-fill {
  opacity: 1;
}

@media (prefers-reduced-motion: no-preference) {
  .checkbox-input:checked + .checkbox-check .checkbox-fill {
    border-radius: inherit;
    /* Scale larger to compensate for removed ring and ensure checkbox appears full size */
    scale: 1.1;
  }

  .checkbox-input:checked + .checkbox-check .checkbox-fill path {
    stroke-dashoffset: 0;
    transition-delay: 33ms;
  }
}

.checkbox-input:focus-visible + .checkbox-check {
  box-shadow:
    0 0 0 var(--outline-offset) var(--background),
    0 0 0 calc(var(--outline-offset) + var(--outline-width))
      var(--outline-color);
}

.checkbox-input:focus-visible + .checkbox-check,
.checkbox-input:focus-visible + .checkbox-check * {
  transition: none;
}

.checkbox-label:hover .checkbox-check::before {
  opacity: 0.31;
}

.checkbox-label {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  user-select: none;
}

.checkbox-text {
  display: block;
  font-weight: 600;
}

.checkbox-input {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

